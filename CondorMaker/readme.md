# it's hard to change the condor submitting files (yes I am lazy)
# this is the only reason this package is developed

``` cp ./Jona_{xxx}/condorsubmit/outputfiles/* {Package}/AnalysisFile/allboosted/scripts*/ ```

## the input file: you should be very careful:
1. ./initialfiles/*.list (will talk about it later)
2. ./condorsubmit/initialfiles/submit.sh and submit.sub. please check these two files before you submit the job. these are the files that you submit to condor.

## each time you rerun this package, all the date setting will be overwritten. Be careful for rerun!

### I don't know how to comment on .sub fiels so I'll briefly show what should be done:
1. executable : do not change. The TAG_script.sh will be changed automatically after you run this package
2. arguments : do not change.
3. should_transfer_files : do not change
4. transfer_input_files : please subsititude the route in this line to your directory on ceph!
5. output : please subsititude the route in this line to your directory on ceph!
6. error : please subsititude the route in this line to your directory on ceph!
7. log : please subsititude the route in this line to your directory on ceph!
8. x509userproxy : change to your own userproxy id
9. RequestMemory : feel free to change, but the current set is ok
10. RequestCpus : same as above
11. +SingularityImage : same as above
12. +DESIRED_Sites : same as above


### for submit.sh files, I'll briefly show what u should do either: 
1. environment settings : feel free to change if u want to use a different gcc version
2. function stageout: this is only for copying from the condor nodes to ceph. Feel free to change the time for retrying (Sleeping for xxx m)
3. do not change the "TAG" and "DATE" in the following lines unless you want to change the whole package...


## what you need to do in this package : 
1. copy the filelist generated in FilelistMaker (please use ./List/* instead of ./filelist/* to avoid null files) to ./initialfiles
2. make sure ./condorsubmit/initialfiles/submit* are correct
2.1 change the route in line 34 getlist.sh so that it gets to your directory.
3. sh run.sh (you will see some simple instructions when sh this bash script)
4. copy the filelist genereated by it (./filelist/*) to condor directory ( make sure it is same in ./condorsubmit/initialfiles/submit.sub:transfer_input_files!!!)
5. copy the scripts generated by it (./condorsubmit/outputfiles/) to some other place to avoid overwritting and sh run.sh(in the ./condorsubmit/outputfiles/, should be generated automatically) there.

## what is done by ./run.sh
1. grab all the filelist with the same name tag and same year tag and build another filselist to store all of it with the format that condor can access (condor cannot access /ceph/etc etc)
1.1. the strange counting done in getfile.sh is because : we have some null files and we need to skip it. Also, the counting in linux starts like : 1, 10, 11, 12, 13, 14, 15...
2. subsititude the TAG in submit.* to the tags in initialfiles/*
3. read the current time and set the DATE in submit.* and run.sh to current time (you can run once to see what happens :)
4. create the next step run.sh in ./condorsubmit/outputfiles/


## It used to have the option to check whether there are zombie files, but I deleted them. Tell me if you need this option back
